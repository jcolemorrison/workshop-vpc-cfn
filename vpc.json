{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "Production Ready VPC",
  "Metadata": {
    "Author": { "Ref": "ParamAuthorName" }
  },
  "Parameters": {
    "ParamAuthorName": {
      "Type": "String",
      "Description": "Owner of the CFN Template."
    },
    "ParamNatGateway": {
      "Type": "String",
      "Default": "true",
      "AllowedValues": ["true", "false"],
      "ConstraintDescription": "Whether to launch a NAT Gateway for the private subnets. true or false only."
    }
  },
  "Conditions": {
    "CreateNatGateway": {
      "Fn::Equals": [{ "Ref": "ParamNatGateway" }, "true"]
    }
  },
  "Resources": {
    "VPC": {
      "Type": "AWS::EC2::VPC",
      "Properties": {
      }
    },
    "SecurityGroupExample": {
      "Type": "AWS::EC2::SecurityGroup",
      "Properties": {
        "GroupName": {
          "Fn::Sub": "${ParamAuthorName}-my-security-group-${AWS::Region}"
        }
      }
    }
  },
  "Outputs": {
    "VPCId": {
      "Description": "VPC Id",
      "Value": { "Ref": "VPC" }
    }
  }
}